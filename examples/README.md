# IDXPorter ç¤ºä¾‹æ–‡æ¡£

æœ¬ç›®å½•åŒ…å«äº†IDXPorteråº“çš„å„ç§ä½¿ç”¨ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å¦‚ä½•ä½¿ç”¨è¯¥åº“ç”ŸæˆIDX V4.5æ ¼å¼çš„XMLæ–‡ä»¶ã€‚

## ğŸ“ ç¤ºä¾‹æ–‡ä»¶åˆ—è¡¨

### 1. ç®€å•Demo
- **æ–‡ä»¶**: `simple-demo.js` / `simple-demo.ts`
- **ç”¨é€”**: å¿«é€Ÿå…¥é—¨ç¤ºä¾‹ï¼Œå±•ç¤ºåŸºæœ¬çš„Itemåˆ›å»ºåŠŸèƒ½
- **è¿è¡Œ**: `node examples/simple-demo.js`
- **å†…å®¹**:
  - åˆ›å»ºç»„ä»¶ç¦æ­¢åŒº
  - åˆ›å»ºå¸ƒçº¿ä¿ç•™åŒº
  - åˆ›å»ºå¸¦è‡ªå®šä¹‰å±æ€§çš„ç¦æ­¢åŒº
  - æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯

### 2. XMLè¾“å‡ºDemo
- **æ–‡ä»¶**: `xml-output-demo.js`
- **ç”¨é€”**: å±•ç¤ºå¦‚ä½•ç”Ÿæˆå®Œæ•´çš„IDX XMLæ–‡æ¡£
- **è¿è¡Œ**: `node examples/xml-output-demo.js`
- **è¾“å‡º**: `output/demo-output.idx`
- **å†…å®¹**:
  - åˆ›å»ºIDX Header
  - æ·»åŠ å¤šä¸ªItem
  - ç”Ÿæˆå¹¶ä¿å­˜XMLæ–‡ä»¶

### 3. å®Œæ•´XML Demo
- **æ–‡ä»¶**: `complete-xml-demo.js`
- **ç”¨é€”**: å±•ç¤ºåŒ…å«å‡ ä½•å½¢çŠ¶å’Œè‡ªå®šä¹‰å±æ€§çš„å®Œæ•´ç¤ºä¾‹
- **è¿è¡Œ**: `node examples/complete-xml-demo.js`
- **è¾“å‡º**: `output/complete-demo.idx`
- **å†…å®¹**:
  - çŸ©å½¢ç»„ä»¶ç¦æ­¢åŒºï¼ˆå¸¦å‡ ä½•å½¢çŠ¶ï¼‰
  - åœ†å½¢è¿‡å­”ç¦æ­¢åŒºï¼ˆå¸¦å‡ ä½•å½¢çŠ¶ï¼‰
  - å¸ƒçº¿ä¿ç•™åŒºï¼ˆå¸¦è‡ªå®šä¹‰å±æ€§ï¼‰
  - çƒ­ç¦æ­¢åŒºï¼ˆå¸¦Zè½´é«˜åº¦é™åˆ¶ï¼‰
  - æµ‹è¯•ç‚¹ä¿ç•™åŒº
  - è‡ªå®šä¹‰ç¦æ­¢åŒº

### 4. ç¦æ­¢/ä¿ç•™åŒºåŸŸå®Œæ•´ç¤ºä¾‹
- **æ–‡ä»¶**: `keepout-keepin-areas.example.js` / `keepout-keepin-areas.example.ts`
- **ç”¨é€”**: å±•ç¤ºæ‰€æœ‰ç±»å‹çš„ç¦æ­¢åŒºå’Œä¿ç•™åŒº
- **è¿è¡Œ**: `node examples/keepout-keepin-areas.example.js`
- **å†…å®¹**:
  - 6ç§ç¦æ­¢åŒºç±»å‹ï¼ˆç»„ä»¶ã€å¸ƒçº¿ã€è¿‡å­”ã€æµ‹è¯•ç‚¹ã€çƒ­ã€å…¶ä»–ï¼‰
  - 6ç§ä¿ç•™åŒºç±»å‹ï¼ˆç»„ä»¶ã€å¸ƒçº¿ã€è¿‡å­”ã€æµ‹è¯•ç‚¹ã€å…¶ä»–ï¼‰
  - å¸¦Zè½´é«˜åº¦èŒƒå›´çš„ç¦æ­¢åŒº
  - å¸¦çº¦æŸç±»å‹çš„ä¿ç•™åŒº
  - å¸¦å½¢çŠ¶å¼•ç”¨çš„ç¦æ­¢åŒº

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œæ‰€æœ‰ç¤ºä¾‹

```bash
# ç®€å•Demo
node examples/simple-demo.js

# XMLè¾“å‡ºDemo
node examples/xml-output-demo.js

# å®Œæ•´XML Demo
node examples/complete-xml-demo.js

# ç¦æ­¢/ä¿ç•™åŒºåŸŸç¤ºä¾‹
node examples/keepout-keepin-areas.example.js
```

### æŸ¥çœ‹ç”Ÿæˆçš„XMLæ–‡ä»¶

ç”Ÿæˆçš„IDXæ–‡ä»¶ä¿å­˜åœ¨ `output/` ç›®å½•ä¸‹ï¼š
- `output/demo-output.idx` - åŸºç¡€XMLè¾“å‡º
- `output/complete-demo.idx` - å®Œæ•´XMLè¾“å‡º

ä½ å¯ä»¥ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¿™äº›æ–‡ä»¶æŸ¥çœ‹å†…å®¹ã€‚

## ğŸ“Š ç”Ÿæˆçš„XMLç»“æ„

ç”Ÿæˆçš„IDX XMLæ–‡ä»¶ç¬¦åˆIDX V4.5æ ‡å‡†ï¼ŒåŒ…å«ä»¥ä¸‹ä¸»è¦éƒ¨åˆ†ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<foundation:EDMDDataSet>
  <!-- æ–‡æ¡£å¤´éƒ¨ -->
  <foundation:Header>
    <foundation:CreatorCompany>...</foundation:CreatorCompany>
    <foundation:CreatorSystem>...</foundation:CreatorSystem>
    <foundation:CreationDateTime>...</foundation:CreationDateTime>
    <foundation:GlobalUnitLength>UNIT_MM</foundation:GlobalUnitLength>
  </foundation:Header>
  
  <!-- æ–‡æ¡£ä¸»ä½“ -->
  <foundation:Body/>
  
  <!-- Itemåˆ—è¡¨ -->
  <foundation:Item id="..." itemType="..." geometryType="...">
    <foundation:Name>...</foundation:Name>
    <foundation:Description>...</foundation:Description>
    <!-- å¯é€‰çš„å‡ ä½•å½¢çŠ¶ã€è‡ªå®šä¹‰å±æ€§ç­‰ -->
  </foundation:Item>
  
  <!-- å¤„ç†æŒ‡ä»¤ -->
  <foundation:ProcessInstruction>
    <foundation:SendInformation/>
  </foundation:ProcessInstruction>
</foundation:EDMDDataSet>
```

## ğŸ¯ æ”¯æŒçš„å‡ ä½•ç±»å‹

### ç¦æ­¢åŒºåŸŸ (KEEPOUT_AREA)
- `KEEPOUT_AREA_COMPONENT` - ç»„ä»¶ç¦æ­¢åŒº
- `KEEPOUT_AREA_ROUTE` - å¸ƒçº¿ç¦æ­¢åŒº
- `KEEPOUT_AREA_VIA` - è¿‡å­”ç¦æ­¢åŒº
- `KEEPOUT_AREA_TESTPOINT` - æµ‹è¯•ç‚¹ç¦æ­¢åŒº
- `KEEPOUT_AREA_THERMAL` - çƒ­ç¦æ­¢åŒº
- `KEEPOUT_AREA_OTHER` - å…¶ä»–ç±»å‹ç¦æ­¢åŒº

### ä¿ç•™åŒºåŸŸ (KEEPIN_AREA)
- `KEEPIN_AREA_COMPONENT` - ç»„ä»¶ä¿ç•™åŒº
- `KEEPIN_AREA_ROUTE` - å¸ƒçº¿ä¿ç•™åŒº
- `KEEPIN_AREA_VIA` - è¿‡å­”ä¿ç•™åŒº
- `KEEPIN_AREA_TESTPOINT` - æµ‹è¯•ç‚¹ä¿ç•™åŒº
- `KEEPIN_AREA_OTHER` - å…¶ä»–ç±»å‹ä¿ç•™åŒº

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. åˆ›å»ºå¸¦å‡ ä½•å½¢çŠ¶çš„Item

```javascript
const geoFactory = new GeometryFactory();

// åˆ›å»ºçŸ©å½¢
const p1 = geoFactory.createPoint(0, 0);
const p2 = geoFactory.createPoint(10, 0);
const p3 = geoFactory.createPoint(10, 10);
const p4 = geoFactory.createPoint(0, 10);
const polyline = geoFactory.createPolyLine([p1, p2, p3, p4, p1], 0.2);
const curveSet = geoFactory.createCurveSet2d(polyline, 0, 1.6);

// åˆ›å»ºItemå¹¶å…³è”å‡ ä½•å½¢çŠ¶
const item = itemFactory.createItem(
  'my_item',
  'My Item',
  ItemType.SINGLE,
  identifier,
  GeometryType.KEEPOUT_AREA_COMPONENT,
  { shape: curveSet }
);
```

### 2. æ·»åŠ è‡ªå®šä¹‰å±æ€§

```javascript
// åˆ›å»ºå±æ€§é”®
const heightKey = itemFactory.createPropertyKey('EDA', 'MAX_HEIGHT');
// åˆ›å»ºå±æ€§å€¼
const heightProp = itemFactory.createUserProperty(heightKey, '3.5');

// åˆ›å»ºItemæ—¶æ·»åŠ å±æ€§
const item = itemFactory.createItem(
  'my_item',
  'My Item',
  ItemType.SINGLE,
  identifier,
  GeometryType.KEEPOUT_AREA_COMPONENT,
  { userProperties: [heightProp] }
);
```

### 3. ç”Ÿæˆå¹¶ä¿å­˜XML

```javascript
const builder = new IDXBuilder();

builder
  .createHeader({
    globalUnitLength: UnitLength.UNIT_MM,
    creatorCompany: 'MyCompany',
    creatorSystem: 'MyEDA'
  })
  .addItem(item1)
  .addItem(item2);

// ç”ŸæˆXMLå­—ç¬¦ä¸²
const xmlContent = builder.toXML();

// ä¿å­˜åˆ°æ–‡ä»¶
fs.writeFileSync('output.idx', xmlContent, 'utf8');
```

## ğŸ” éªŒè¯XMLè¾“å‡º

ç”Ÿæˆçš„XMLæ–‡ä»¶å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

1. **XMLæ ¼å¼éªŒè¯**: ä½¿ç”¨ä»»ä½•XMLéªŒè¯å·¥å…·æ£€æŸ¥æ ¼å¼æ˜¯å¦æ­£ç¡®
2. **IDXæ ‡å‡†éªŒè¯**: ç¡®è®¤å‘½åç©ºé—´å’Œå…ƒç´ ç¬¦åˆIDX V4.5æ ‡å‡†
3. **å¯¼å…¥æµ‹è¯•**: å°è¯•å°†ç”Ÿæˆçš„æ–‡ä»¶å¯¼å…¥åˆ°æ”¯æŒIDXçš„ECAD/MCADå·¥å…·ä¸­

## ğŸ“š æ›´å¤šèµ„æº

- [IDX V4.5 è§„èŒƒæ–‡æ¡£](https://www.prostep.org/en/projects/ecad-mcad-collaboration/)
- [é¡¹ç›®README](../README.md)
- [APIæ–‡æ¡£](../docs/)

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæœ‰äº›å±æ€§æ²¡æœ‰å‡ºç°åœ¨XMLä¸­ï¼Ÿ
A: æŸäº›å¯é€‰å±æ€§ï¼ˆå¦‚å‡ ä½•å½¢çŠ¶ã€è‡ªå®šä¹‰å±æ€§ç­‰ï¼‰åªæœ‰åœ¨æ˜ç¡®è®¾ç½®æ—¶æ‰ä¼šå‡ºç°åœ¨XMLä¸­ã€‚

### Q: å¦‚ä½•æ·»åŠ æ›´å¤æ‚çš„å‡ ä½•å½¢çŠ¶ï¼Ÿ
A: ä½¿ç”¨GeometryFactoryåˆ›å»ºå„ç§å‡ ä½•å…ƒç´ ï¼ˆç‚¹ã€çº¿ã€åœ†ã€å¼§ç­‰ï¼‰ï¼Œç„¶åç»„åˆæˆCurveSet2dã€‚

### Q: ç”Ÿæˆçš„XMLæ–‡ä»¶å¯ä»¥ç›´æ¥ç”¨äºç”Ÿäº§å—ï¼Ÿ
A: ç”Ÿæˆçš„XMLç¬¦åˆIDX V4.5æ ‡å‡†ï¼Œä½†å»ºè®®åœ¨å®é™…ä½¿ç”¨å‰è¿›è¡Œå……åˆ†æµ‹è¯•å’ŒéªŒè¯ã€‚

## ğŸ¤ è´¡çŒ®

å¦‚æœä½ æœ‰æ–°çš„ç¤ºä¾‹æƒ³æ³•æˆ–å‘ç°é—®é¢˜ï¼Œæ¬¢è¿æäº¤Issueæˆ–Pull Requestï¼
